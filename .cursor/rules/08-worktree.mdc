---
description: Git worktree strategy for parallel project isolation. Activate when discussing worktrees, parallel development, or running multiple projects simultaneously.
alwaysApply: false
---

# Git Worktree Strategy

This workspace uses git worktrees to enable parallel work on multiple projects without branch conflicts.

## Concept

Each project can run in its own worktree — a separate working directory that shares the same git history but has its own branch, index, and files. This means multiple agents (or the automated pipeline) can work on different projects simultaneously.

## Naming Convention

Worktrees live as sibling directories to the workspace root:

```
Documents/PROJECTS/
├── AGENTS/                          ← Main workspace (this repo)
├── AGENTS-wt-todo-app/              ← Worktree for todo-app project
├── AGENTS-wt-dashboard/             ← Worktree for dashboard project
└── AGENTS-wt-api-backend/           ← Worktree for api-backend project
```

Each worktree tracks a branch: `feat/<project-name>`.

## Commands

Use the helper script or npm shortcuts:

```bash
# Create a worktree for a new project
bash scripts/worktree.sh create <project-name>
# npm run worktree:create -- <project-name>

# List all active worktrees
bash scripts/worktree.sh list

# Remove a worktree when done
bash scripts/worktree.sh remove <project-name>

# Clean up stale metadata
bash scripts/worktree.sh prune
```

## When to Use Worktrees

- **Parallel projects**: Working on multiple projects at the same time
- **Parallel pipeline runs**: Running the automated pipeline for different projects simultaneously
- **Isolation**: Keeping one project's changes completely separate from another
- **Code review**: Opening a separate Cursor window on a worktree branch

## Rules

1. Never check out the same branch in two worktrees simultaneously
2. Always create worktrees via the helper script to maintain naming conventions
3. Merge worktree branches back to `main` when the project is complete
4. Remove worktrees after merging to keep the filesystem clean
