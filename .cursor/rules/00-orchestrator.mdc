---
description: Master orchestrator for the multi-agent pipeline. Coordinates phases, repo creation, Slack notifications, Vercel deployments, and human-in-the-loop feedback.
alwaysApply: true
---

# Multi-Agent Pipeline Orchestrator

This workspace builds software projects through a 6-phase agent pipeline. Each project gets its own GitHub repo, Slack channel, and Vercel deployment.

## Agents

| Phase | Agent | Cloud Model |
|-------|-------|-------------|
| 1 | Requirements Engineer | gpt-5.2-high |
| 2 | Architect | claude-4.6-opus-high-thinking |
| 3 | Design Explorer | gpt-5.2-high |
| 4 | Design Translator | claude-4.6-opus-high-thinking |
| 5 | Engineer | gpt-5.3-codex-high |
| 6 | QA Reviewer | composer-1.5 |

## Pipeline Flow

```
Prompt → ensureRepo → inferScope → [1] Req → [2] Arch → [3] Design Explorer → NanoBanana variants → HitL selection → [4] Design Translator → NanoBanana assets → [5] Eng → [6] QA → Vercel Deploy → Merge/PR
                                                                                                                                                                                          ↑
  Slack #proj-<name> ← status updates ← HitL prompts ← followup replies ────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

## Scope (auto-detected from prompt)

| Scope | When | Effect |
|-------|------|--------|
| nano | ≤30 words or "simple/todo/landing" | Minimal docs, 2 variants, QA skipped |
| micro | ≤50 words, 1 signal | Lean docs, 2 variants, light QA |
| standard | 50-120 words, 2 signals | Full docs, 3 variants, full QA |
| large | >120 words or 4+ signals | Extended docs, 4 variants, full QA |

The pipeline prompt controls deliverable counts per scope. Agents receive SCOPE in their prompt and scale output accordingly.

## Project Lifecycle

- **New project**: `--project my-app` — creates `b0ndt/my-app` on GitHub
- **Iterate**: Same `--project my-app` — detects existing repo, agents branch off `main`
- **Resume**: `--from 4 --ref cursor/branch` — skip to Design Translator

## Interactive Mode

`--interactive` pauses after each phase for human review:
- Terminal: `a` (approve) / `f <msg>` (followup) / `s` (stop) / `r` (retry)
- Slack: Same commands as thread replies in `#proj-<name>`

## Image Generation

Agents NEVER generate images. They write text prompts only.
The pipeline orchestrator calls NanoBanana Pro automatically:
- After Phase 3 (Design Explorer): generates mockup variants from `design-exploration.md`
- After Phase 4 (Design Translator): generates brand assets from `visual-prompts.md`

## Handoff Protocol

Every agent ends with:
```
## Handoff
Artifacts: <file list>
Open questions: <items>
Blockers: <app-related blockers only — never image generation>
```

## Rules

1. **Efficiency**: Act, don't plan. Ship artifacts directly.
2. **Scope-aware**: Scale deliverables to the SCOPE level in your prompt.
3. **Traceability**: REQ → ADR → Design → Code → Review.
4. **No image generation**: Write prompts only — pipeline handles NanoBanana.
